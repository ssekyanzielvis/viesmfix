# ğŸ—ï¸ ViesMFix Architecture Guide

## Clean Architecture Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PRESENTATION LAYER                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Screens    â”‚  â”‚   Widgets    â”‚  â”‚  Providers   â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ - Home       â”‚  â”‚ - MovieCard  â”‚  â”‚ - Movie      â”‚      â”‚
â”‚  â”‚ - Details    â”‚  â”‚ - Section    â”‚  â”‚ - Theme      â”‚      â”‚
â”‚  â”‚ - Search     â”‚  â”‚ - Shimmer    â”‚  â”‚ - Search     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â†“                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DOMAIN LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Entities   â”‚  â”‚ Repositories â”‚  â”‚  Use Cases   â”‚      â”‚
â”‚  â”‚              â”‚  â”‚ (Interfaces) â”‚  â”‚  (Future)    â”‚      â”‚
â”‚  â”‚ - Movie      â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ - User       â”‚  â”‚ - Movie      â”‚  â”‚ - GetMovies  â”‚      â”‚
â”‚  â”‚ - Watchlist  â”‚  â”‚ - Auth       â”‚  â”‚ - Search     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â†“                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    Models    â”‚  â”‚ Repositories â”‚  â”‚   Mappers    â”‚      â”‚
â”‚  â”‚              â”‚  â”‚   (Impl)     â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ - TMDBMovie  â”‚  â”‚              â”‚  â”‚ - Movie      â”‚      â”‚
â”‚  â”‚ - TMDBCast   â”‚  â”‚ - MovieRepo  â”‚  â”‚   Mapper     â”‚      â”‚
â”‚  â”‚ - TMDBGenre  â”‚  â”‚   Impl       â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â†“                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SERVICES LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚     API      â”‚  â”‚   Storage    â”‚  â”‚    Cache     â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ - TMDB       â”‚  â”‚ - Secure     â”‚  â”‚ - Images     â”‚      â”‚
â”‚  â”‚   Service    â”‚  â”‚   Storage    â”‚  â”‚ - Network    â”‚      â”‚
â”‚  â”‚              â”‚  â”‚ - Shared     â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â†“                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    EXTERNAL SERVICES    â”‚
              â”‚                         â”‚
              â”‚    â€¢ TMDB API           â”‚
              â”‚    â€¢ Image CDN          â”‚
              â”‚    â€¢ Supabase (future)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚
â”‚   Action    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Screen/Widget  â”‚ â† Displays data
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Provider     â”‚ â† Manages state
â”‚   (Riverpod)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Repository     â”‚ â† Business logic
â”‚   Interface      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Repository     â”‚ â† Data access
â”‚ Implementation   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Service    â”‚ â† Network calls
â”‚   (TMDB)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TMDB API       â”‚ â† External data
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management Flow (Riverpod)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Provider Hierarchy                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Provider (Services - Singleton)                        â”‚
â”‚  â”œâ”€â”€ tmdbServiceProvider                                â”‚
â”‚  â””â”€â”€ movieRepositoryProvider                            â”‚
â”‚                                                          â”‚
â”‚  StateNotifierProvider (Mutable State)                  â”‚
â”‚  â””â”€â”€ themeProvider                                      â”‚
â”‚                                                          â”‚
â”‚  FutureProvider (Async Data)                            â”‚
â”‚  â”œâ”€â”€ trendingMoviesProvider                            â”‚
â”‚  â”œâ”€â”€ popularMoviesProvider                             â”‚
â”‚  â”œâ”€â”€ upcomingMoviesProvider                            â”‚
â”‚  â””â”€â”€ searchResultsProvider                             â”‚
â”‚                                                          â”‚
â”‚  FutureProvider.family (Parameterized)                  â”‚
â”‚  â””â”€â”€ movieDetailsProvider(movieId)                      â”‚
â”‚                                                          â”‚
â”‚  StateProvider (Simple State)                           â”‚
â”‚  â””â”€â”€ searchQueryProvider                               â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Widget Tree Structure

```
MaterialApp
  â””â”€â”€ HomeScreen
      â”œâ”€â”€ AppBar
      â”‚   â”œâ”€â”€ Title
      â”‚   â”œâ”€â”€ SearchButton
      â”‚   â””â”€â”€ ThemeToggle
      â”‚
      â”œâ”€â”€ SingleChildScrollView
      â”‚   â”œâ”€â”€ MovieSection (Trending)
      â”‚   â”‚   â””â”€â”€ ListView.builder
      â”‚   â”‚       â””â”€â”€ MovieCard
      â”‚   â”‚
      â”‚   â”œâ”€â”€ MovieSection (Popular)
      â”‚   â”‚   â””â”€â”€ ListView.builder
      â”‚   â”‚       â””â”€â”€ MovieCard
      â”‚   â”‚
      â”‚   â””â”€â”€ MovieSection (Upcoming)
      â”‚       â””â”€â”€ ListView.builder
      â”‚           â””â”€â”€ MovieCard
      â”‚
      â””â”€â”€ Navigation
          â”œâ”€â”€ â†’ MovieDetailScreen
          â””â”€â”€ â†’ SearchScreen
```

## Error Handling Flow

```
API Call
   â”‚
   â”œâ”€â”€â”€ Success â”€â”€â†’ Return Data
   â”‚                    â”‚
   â”‚                    â†“
   â”‚              Convert to Entity
   â”‚                    â”‚
   â”‚                    â†“
   â”‚              Update Provider
   â”‚                    â”‚
   â”‚                    â†“
   â”‚              Rebuild UI
   â”‚
   â””â”€â”€â”€ Error â”€â”€â†’ Throw Exception
                      â”‚
                      â†“
                 Catch in Provider
                      â”‚
                      â†“
                Display Error Widget
```

## Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Three-Tier Cache System          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  1. Memory Cache (Riverpod)             â”‚
â”‚     â€¢ Provider results cached           â”‚
â”‚     â€¢ Invalidate on user action         â”‚
â”‚     â€¢ Fast access (<1ms)                â”‚
â”‚                                          â”‚
â”‚  2. Network Cache (Dio + Image Cache)   â”‚
â”‚     â€¢ HTTP response caching             â”‚
â”‚     â€¢ Image disk cache                  â”‚
â”‚     â€¢ Moderate access (~10-50ms)        â”‚
â”‚                                          â”‚
â”‚  3. Future: Local Database (SQLite)     â”‚
â”‚     â€¢ Offline support                   â”‚
â”‚     â€¢ Persistent storage                â”‚
â”‚     â€¢ Slower access (~50-200ms)         â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Theme System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Theme Architecture            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  ColorScheme                             â”‚
â”‚  â”œâ”€â”€ Dark (Primary)                     â”‚
â”‚  â”‚   â”œâ”€â”€ Background: #0F0F0F           â”‚
â”‚  â”‚   â”œâ”€â”€ Surface: #1A1A1A              â”‚
â”‚  â”‚   â”œâ”€â”€ Primary: #E50914 (Red)        â”‚
â”‚  â”‚   â””â”€â”€ OnSurface: #FFFFFF            â”‚
â”‚  â”‚                                      â”‚
â”‚  â””â”€â”€ Light                              â”‚
â”‚      â”œâ”€â”€ Background: #FAFAFA            â”‚
â”‚      â”œâ”€â”€ Surface: #FFFFFF               â”‚
â”‚      â”œâ”€â”€ Primary: #E50914               â”‚
â”‚      â””â”€â”€ OnSurface: #000000             â”‚
â”‚                                          â”‚
â”‚  Typography (Google Fonts - Poppins)    â”‚
â”‚  â”œâ”€â”€ Display (57px - 36px)              â”‚
â”‚  â”œâ”€â”€ Headline (32px - 24px)             â”‚
â”‚  â”œâ”€â”€ Title (22px - 14px)                â”‚
â”‚  â”œâ”€â”€ Body (16px - 12px)                 â”‚
â”‚  â””â”€â”€ Label (14px - 11px)                â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## API Integration Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        TMDB Service Methods               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  getTrendingMovies(page, timeWindow)      â”‚
â”‚  â†“                                         â”‚
â”‚  Dio GET /trending/movie/{timeWindow}     â”‚
â”‚  â†“                                         â”‚
â”‚  Parse JSON â†’ TMDBMovieListResponse       â”‚
â”‚  â†“                                         â”‚
â”‚  Return List<TMDBMovieModel>              â”‚
â”‚                                            â”‚
â”‚  Repository.getTrendingMovies()           â”‚
â”‚  â†“                                         â”‚
â”‚  Call Service                             â”‚
â”‚  â†“                                         â”‚
â”‚  Map Models â†’ Entities                    â”‚
â”‚  â†“                                         â”‚
â”‚  Return List<MovieEntity>                 â”‚
â”‚                                            â”‚
â”‚  Provider                                 â”‚
â”‚  â†“                                         â”‚
â”‚  Call Repository                          â”‚
â”‚  â†“                                         â”‚
â”‚  Cache Result                             â”‚
â”‚  â†“                                         â”‚
â”‚  Notify Listeners                         â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Organization Pattern

```
src/
â”œâ”€â”€ core/           â†’ Shared infrastructure
â”‚   â”œâ”€â”€ constants/  â†’ Configuration values
â”‚   â”œâ”€â”€ themes/     â†’ Visual styling
â”‚   â”œâ”€â”€ utils/      â†’ Helper functions
â”‚   â””â”€â”€ widgets/    â†’ Reusable components
â”‚
â”œâ”€â”€ data/           â†’ Data management
â”‚   â”œâ”€â”€ models/     â†’ API response structures
â”‚   â”œâ”€â”€ mappers/    â†’ Model â†” Entity conversion
â”‚   â””â”€â”€ repositories/ â†’ Data access implementation
â”‚
â”œâ”€â”€ domain/         â†’ Business logic
â”‚   â”œâ”€â”€ entities/   â†’ Business objects
â”‚   â”œâ”€â”€ repositories/ â†’ Data access contracts
â”‚   â””â”€â”€ usecases/   â†’ Business operations
â”‚
â”œâ”€â”€ presentation/   â†’ User interface
â”‚   â”œâ”€â”€ features/   â†’ Feature modules
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”œâ”€â”€ movie/
â”‚   â”‚   â””â”€â”€ search/
â”‚   â”œâ”€â”€ providers/  â†’ State management
â”‚   â””â”€â”€ widgets/    â†’ UI components
â”‚
â””â”€â”€ services/       â†’ External integrations
    â”œâ”€â”€ api/        â†’ HTTP clients
    â””â”€â”€ storage/    â†’ Local persistence
```

## Dependency Injection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Riverpod DI Container             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  1. Service Layer (Singleton)          â”‚
â”‚     final tmdbServiceProvider =        â”‚
â”‚       Provider((ref) => TMDBService()) â”‚
â”‚                                         â”‚
â”‚  2. Repository Layer                   â”‚
â”‚     final movieRepositoryProvider =    â”‚
â”‚       Provider((ref) {                 â”‚
â”‚         final service =                â”‚
â”‚           ref.watch(tmdbService);      â”‚
â”‚         return MovieRepoImpl(service); â”‚
â”‚       })                               â”‚
â”‚                                         â”‚
â”‚  3. Feature Layer                      â”‚
â”‚     final trendingMoviesProvider =     â”‚
â”‚       FutureProvider((ref) {           â”‚
â”‚         final repo =                   â”‚
â”‚           ref.watch(movieRepo);        â”‚
â”‚         return repo.getTrending();     â”‚
â”‚       })                               â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Testing Strategy (Future)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Testing Pyramid              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚         /\                          â”‚
â”‚        /E2E\      Integration Tests â”‚
â”‚       /â”€â”€â”€â”€â”€â”€\                      â”‚
â”‚      /Widget  \   Widget Tests      â”‚
â”‚     /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\                    â”‚
â”‚    /    Unit    \ Unit Tests        â”‚
â”‚   /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\                  â”‚
â”‚                                      â”‚
â”‚  Unit Tests (60%)                   â”‚
â”‚  â€¢ Repository tests                 â”‚
â”‚  â€¢ Mapper tests                     â”‚
â”‚  â€¢ Utility tests                    â”‚
â”‚                                      â”‚
â”‚  Widget Tests (30%)                 â”‚
â”‚  â€¢ Screen tests                     â”‚
â”‚  â€¢ Widget tests                     â”‚
â”‚  â€¢ Provider tests                   â”‚
â”‚                                      â”‚
â”‚  Integration Tests (10%)            â”‚
â”‚  â€¢ User flow tests                  â”‚
â”‚  â€¢ API integration tests            â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Architecture Benefits

âœ… **Separation of Concerns**: Each layer has a single responsibility
âœ… **Testability**: Easy to mock and test each layer independently
âœ… **Maintainability**: Changes in one layer don't affect others
âœ… **Scalability**: Easy to add new features without restructuring
âœ… **Flexibility**: Easy to swap implementations (e.g., different API)
âœ… **Reusability**: Components can be reused across features

---

This architecture ensures the app is production-ready and easy to extend! ğŸš€
